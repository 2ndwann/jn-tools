<html>
<body>
<h1>Calendar</h1>

<p>The current time and date is (YYYY/MM/DD):<br/>
<span id="year">0</span>/<span id="month">0</span>/<span id="day">0</span></p>

<p>Debug info:<br/>
Milliseconds since Jehvnar Reckoning Epoch: <span id="jehvnarEpochMillis"></span><br/>
Milliseconds elapsed since beginning of Jehvnar Reckoning year: <span id="jehvnarReckoningYearMillis"></span></p>

<script>
const jehvnarEpoch = 1590883200000; // The Jehvnar epoch
const monthsInAYear = 4; // How many months there are in a year
const daysInAYear = 72; // How many days are in a year

let unixTimeNow; // The unix millis time now since Unix epoch
let jehvnarTimeNow; // The Jehvnar time now in milliseconds

let timeOffset = 0; // Ingame time offset in milliseconds (probably gonna be used later)

// Format Jehvnar Reckoning year
let formatYear = (jehvnarTime) => {
	return Math.round(jehvnarTime / 86400000);
}


// Format month based on 4-month system
let formatMonth = (jehvnarTime) => {
	//todo
	
	let todayDate = new Date().getUTCDate(); // Get today's date
	let todayMonth = new Date().getUTCMonth() + 1; // Get today's month
	let todayYear = new Date().getUTCFullYear(); // Get today's year
	let today = new Date(todayYear, todayMonth, todayDate); // Get today when it started at GMT 00:00
	
	let timeElapsedForToday = today.getTime() - jehvnarTimeNow + timeOffset;
	
	return timeElapsedForToday; // todo
}


// Update the time
let updateTime = () => {
	unixTimeNow = Date.now(); // Update unix time
	jehvnarTimeNow = unixTimeNow - jehvnarEpoch + timeOffset; // Derive Jehvnar millisecond time
	
	// Update timestamps
	document.getElementById('year').innerHTML = formatYear(jehvnarTimeNow);
	document.getElementById('jehvnarEpochMillis').innerHTML = jehvnarTimeNow;
	document.getElementById('jehvnarReckoningYearMillis').innerHTML = formatMonth(jehvnarTimeNow);
}
setInterval(updateTime, 1); // Update the time
</script>
</body>
</html>